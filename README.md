# 2023 全國大專校院智慧創新暨跨域整合創作競賽
### 組編號：50122  
### 題目：智慧結帳購物車  
### 簡介
傳統的結帳流程涉及掃描商品條碼，手動輸入產品名稱或價格，這樣的過程可能會花費相當多的時間，尤其在繁忙的時段。然而，利用影像辨識技術，可以讓結帳這個行為變得更加迅速，甚至可以省略，同時也有助於在這個疫情時代減少接觸。  
目前的影像辨識結帳的方法大多為消費者將商品放在收銀機或購物車的攝像頭前，並讓攝像頭去擷取購物車內當前的畫面來辨識。然而，這種方法存在一些局限性。例如，如果消費者放入一件商品後後悔並想要取出，或是商品被其他商品遮住，就會使得這個結帳系統變得不準確。甚至有可能有一些想鑽漏洞的顧客會故意用手擋住商品，讓相機無法判讀，從而導致店家遭受巨大損失。  
為了解決這些問題，我們希望打造一個可以實時直接辨識購買行為的系統，以確定購物推車內的商品和消費者放入要購買的商品是否一致。這個系統將透過判斷影片中每一幀的圖片來判斷商品的放入、取出，來提高結帳的準確性和效率。   
<img width="323" alt="截圖 2023-08-01 下午1 14 27" src="https://github.com/109810022/2023_innovatated_race/assets/100888502/c912f9cd-b25b-4df9-85f1-a1831b7d7c61"> 物件的取出或放入----->
<img width="300" alt="截圖 2023-08-01 下午1 12 14" src="https://github.com/109810022/2023_innovatated_race/assets/100888502/c09f407f-3bfd-4928-83fc-96b418ae38d2">


### 可辨識物件
麥香紅茶、奶茶、綠茶 ->鋁箔包  
**可自行替換新模型**
## 使用方式
```run.py``` -->全系統運行  
  
```start.py``` -->只有介面設計部分（更改```action.csv```可更新資料）  
  
```v5_shoppingcart```-->只有相機偵測，並寫入```action.csv```的功能  

## 原理
先將鏡頭的視野劃分成兩區域，再透過yolo自訓練模型的方匡計算在區域內的面積，並以list儲存，用面積的增加減少以判斷物品是放入或取出。  
<img width="242" alt="截圖 2023-08-01 下午1 10 35" src="https://github.com/109810022/2023_innovatated_race/assets/100888502/7b06d75f-a90d-46ba-8981-cb40f50c1643"> -->交界面積  
詳細算法[見此](https://github.com/109810022/2023_innovated_race/blob/main/background_algorithm.md)
## 功能
1. 偵測物件，並辨識出物件為何（yolov8 自訓練模型）
2. 量測物件和指定區域的交界面積，並儲存在陣列，加上時間軸用以判斷物品動作的趨勢，放入或取出。
3. 將判斷時間、物件、動作寫入```action.csv```，並儲存成csv，用於程式間的動作通訊，亦作為事件記錄簿。
4. 介面透過讀取```action.csv```更新顯示資料
5. 登入功能：按下login按鈕，進入登入介面，輸入帳號（電子郵件帳號）按下enter，及可將資料傳入主頁面，顯示welcome XXX@gmail.com
6. 取消購買：按下cancel按鈕，取消此次購買行為，將帳號登出，並將頁面停止顯示，並在終端輸出「請將購物車歸還至賣場櫃檯」
7. 付款功能：按下PAY按鈕，確認付款。將購買資料取出，並透過系統電子郵件帳號寄送到使用者帳號的信箱內。
8. 統整全部軟體架構（```run.py```)，建立一個主進程作為主軸，將行為辨識（```v5_shoppingcart```)和UI介面（```start.py```)作為子進程。當啟動```run.py```則同時啟動兩程式，當UI介面觸發付款或取消購買的行為時，影像辨識監視介面也一併關閉，完成程序的關閉。
## 使用函式庫
```
PyQt5  
ultralytics  
shapely
cv2  
pandas
smtplib
email
```
## 初始開發版本（無界面開發，純使用cv2)
[點這裡](https://github.com/109810022/AI_ntut)







